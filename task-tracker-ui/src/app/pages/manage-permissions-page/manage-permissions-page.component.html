<div class="columns">
    <div class="column is-2">
        <app-side-bar></app-side-bar>
    </div>
    <div class="column">
        <p class="title has-text-centered">User permissions</p>
        <div *ngIf="!isAddingUser">
            <button class="button is-info" (click)="toggleIsAddingUser()">Add permissions</button>
        </div>
        <div class="control" *ngIf="isAddingUser">
            <div class="select">
                <select name="user" [(ngModel)]="selectedUserId">
                    <option [value]="user.user.id" *ngFor="let user of searchedUsers">{{ user.user.email }}</option>
                </select>
            </div>
            <button class="button is-success" (click)="selectUser()">Add permissions</button>
        </div>
        <table class="table mt-2">
            <thead>
                <tr>
                    <th class="has-text-centered">User</th>
                    <th class="has-text-centered">Can add users</th>
                    <th class="has-text-centered">Can remove users</th>
                    <th class="has-text-centered">Can modify tasks</th>
                    <th class="has-text-centered">Can remove tasks</th>
                    <th class="has-text-centered">Can modify lists</th>
                    <th class="has-text-centered">Can remove lists</th>
                    <th class="has-text-centered">Can modify space</th>
                    <th class="has-text-centered">Can manage task assignees</th>
                    <th class="has-text-centered">Can manage permissions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of permissions">
                    <td class="has-text-centered">
                        {{ user.user.email }}
                    </td>
                    <td class="has-text-centered">
                        <input name="can-add-users" type="checkbox" [(ngModel)]="user.canAddUsers">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-remove-users" type="checkbox" [(ngModel)]="user.canRemoveUsers">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-modify-tasks" type="checkbox" [(ngModel)]="user.canModifyTasks">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-remove-tasks" type="checkbox" [(ngModel)]="user.canRemoveTasks">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-modify-lists" type="checkbox" [(ngModel)]="user.canModifyLists">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-remove-lists" type="checkbox" [(ngModel)]="user.canRemoveLists">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-modify-space" type="checkbox" [(ngModel)]="user.canModifySpace">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-assign-task-users" type="checkbox" [(ngModel)]="user.canAssignTaskUsers">
                    </td>
                    <td class="has-text-centered">
                        <input name="can-change-permissions" type="checkbox" [(ngModel)]="user.canChangePermissions">
                    </td>
                    <td>
                        <button class="button is-warning" (click)="updatePermissions(user)">Confirm changes</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
